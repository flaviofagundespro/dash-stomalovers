version: '3.7'
services:
    postgres:
        image: pgvector/pgvector:pg15
        environment:
            - POSTGRES_PASSWORD=p7m8kf1FrNo8YKly
        networks:
            - network_public
        volumes:
            - postgres_data:/var/lib/postgresql/data
        deploy:
            mode: replicated
            replicas: 1
            placement:
                constraints:
                    - node.role == manager
volumes:
    postgres_data:
        external: true
        name: postgres_data
networks:
    network_public:
        external: true
        name: network_swarm_public